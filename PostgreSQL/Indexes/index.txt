

		Индексы

				Индексы повышают производительность.

				Есть различные типы индексов, в рамках конспекта будут рассмотрены индексы на B-деревьях.

				Индекс (принцип работы)

						Строки в таблицах хранятся в неупорядоченном виде. 
						На основании строк формируются индексы, через которые можно быстро получить доступ к строке,
						через указатель, быстро - потому что индексы отсортированы-упорядочены.

						Если требуется отыскать элемент, то мы отыскиваем его в индексах, а потом находим и нужное
						нам значение через сслыку.

						При выполнении поиска строк подсистема СУБД (планировщик) проверяет наличие индекса, указанных
						в условии WHERE. Если индекс сущесвует, планировщик оценивает целесообразность его использования.

						Еще раз: приемущество индексов в их упорядоченности, минусы - накладные расходы на их поддержание 

				Т.к. индекс ускоряет работу, то при создании БД не ограничиваются только автоматически созданными
				индексами, а создают дополнительные индексы с учетом наиболее часто выполняющихся выборок,
				также индексы могут ускорить и скорость сортировки по проиндексированным столбцам.

				Если SQL запрос просматривает значительную часть таблицы, то явная сортировака может оказаться быстрее,
				чем с использованием индекса.

				Селективность - доля строк тоблицы.

				ИНДЕКСЫ желательно использовать ПРИ НИЗКОЙ СЕЛЕКТИВНОСТИ (вибирая небольшое кол-во строк), так они 
				покажут наилучший рзультат, потому что неиндексированным стобцам понадобится просмотреть все значения
				строк - всю таблицу, так как она не упорядочена, что займет немало времени.

				Посмотреть индексы:

					\di или \di+ - посмотреть все индексы в текущей БД.
					\d <имя-таблицы> - Посмотреть индексы в таблице.

							Каждый индекс имеет типовое имя, состоящие из:

									Первыичный ключ - <table_name>_pkey	
									Имени таблицы, имн столбцов по которым создан индекс, суффикс key - для уникального ключа


				Создать:

						CREATE INDEX <имя-индекса> ON <имя таблицы> (<имя столбца>, ...);

						Пример:
						CREATE INDEX ON airports ( airport_name );

				Удалить:

						DROP INDEX <имя-индекса>;

						Пример:
						DROP INDEX passenger_name;


			Проверить скорость работы можно с помощью секундомеров (timer.txt).

				SELECT count( * )
					FROM tickets
				 WHERE passenger_name = 'IVAN IVANOV';


			Порядок индексирования (DESC и ASC)

					По умолчанию индексация идет по возрастанию (DESC), а NULL идет последним.
					При созании индекса можно изенить значение по умолчанию с помощью 

							ASC, DESC,
							NULLS FIRST, NULLS LAST

					Пример:

							CREATE INDEX имя-индекса ON имя-таблиы ( имя-столбца NULLS FIRST, ... );
							CREATE INDEX имя-индекса ON имя-таблиы ( имя-столбца DESC NULLS LAST, ... );